<div class="container-fluid d-flex flex-column align-items-stretch align-self-stretch p-0 " style="min-height: 100vh">
  <div class="row mb-4 bg-dark text-light text-center" >
    <div class="col border-1 border-line ">
      <div class="container mt-4 bg-dark">
        <div class="container card bg-transparent border-1 border-line text-light">
          <p><strong>SteamID:</strong>{{userProfile?.steamId }}</p>
          <p><strong>followersCount:</strong>{{userProfile?.followersCount }}</p>
          <p><strong>FollowingCount:</strong>{{userProfile?.followingCount }}</p>
          <p><strong>Name:</strong>{{userProfile?.profileName }}</p>
          <p><strong>SteamName:</strong>{{userProfile?.steamName }}</p>
          <p><strong>BackdropImg:</strong>{{userProfile?.profileBackdropImgId }}</p>
          <button class="btn btn-line" (click)="openModal()">Change Profile Image</button>

          <div>
            <img [src]="userProfile.lastPlayedGameImgUrl" alt="">
          </div>

          <div *ngIf="profileImageUrl | async as imageUrl">
            <img [src]="imageUrl" alt="Profile Backdrop" />
          </div>

        </div>
      </div>
    </div>
  </div>
  <div class="row d-flex flex-column align-self-stretch align-items-stretch bg-dark text-light text-center">
    <div class="col border-1 border-line ">
        <div class="container d-flex flex-column bg-transparent border-1 border-line text-light" >
          Container PostDTOResp
          <div class="container text-light card bg-transparent border-1 border-line d-flex flex-column">
            <div class="card-body">
              <p>New Post</p>
              <input
                class="input-group bg-transparent text-light border-1 border-line"
                type="text"
                placeholder="Write Something..."
                [(ngModel)]="newPost.content">
            </div>
            <div class="card-footer ">
              <button class="btn btn-line" (click)="makeAPost()">Post</button>
            </div>
          </div>
          <div *ngFor="let p of allPosts$ | async">
            <app-user-post
            [post] = "p"
            ></app-user-post>
          </div>
        </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div *ngIf="isModalOpen" class="modal-overlay">
  <div class="modal-content">
    <h2>Change Profile Image</h2>
    <input type="file" (change)="fileChangeEvent($event)" />

    <image-cropper
      [imageChangedEvent]="imageChangedEvent"
      [maintainAspectRatio]="true"
      [aspectRatio]="4 / 3"
      [resizeToWidth]="500"

    format="png"
      (imageCropped)="imageCropped($event)"
      (imageLoaded)="imageLoaded($event)"
      (cropperReady)="cropperReady()"
      (loadImageFailed)="loadImageFailed()"
    ></image-cropper>

    <img [src]="croppedImage" class="preview-image" />
    <button class="btn btn-line" (click)="saveCroppedImage()">Save</button>
    <button class="btn btn-danger" (click)="closeModal()">Cancel</button>
  </div>
</div>
